<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>3D Spinner</title>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<style>
@import url('https://fonts.googleapis.com/css2?family=Roboto:wght@900&display=swap');

* { --ang: 0; }

html, body { height: 100%; margin: 0; }

body {
  background: black;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
}

.container {
  display: flex;
  align-items: center;
  justify-content: center;
  position: relative;
}

.holder {
  width: 600px;
  height: 200px;
  display: flex;
  justify-content: center;
  align-items: center;
  perspective: 700px;
  perspective-origin: center;
}

.spinner {
  transform-style: preserve-3d;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  transform: rotateY(calc(var(--ang) * 1deg)) translateY(-12px);
  transition: all .5s ease-in-out;
}

.panel {
  border-radius: 5px;
  width: 100px;
  height: 100px;
  position: absolute;
  background-size: cover;
  background-position: 50% 50%;	
  opacity: 1; 
  transition: all .5s ease-in-out, opacity .2s ease-out, transform .3s ease-out;
}

/* Paneles: solo background, el JS controla transform */
.panel.a { background-image: url(https://images.unsplash.com/photo-1516727003284-a96541e51e9c?crop=entropy&cs=srgb&fm=jpg&ixid=M3wzMjM4NDZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2OTM5MjczNzB8&ixlib=rb-4.0.3&q=85); }
.panel.b { background-image: url(https://images.unsplash.com/photo-1691389694412-266f872999c6?crop=entropy&cs=srgb&fm=jpg&ixid=M3wzMjM4NDZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2OTM5MjY5NTh8&ixlib=rb-4.0.3&q=85); }
.panel.c { background-image: url(https://images.unsplash.com/photo-1606391901318-07003db08d63?crop=entropy&cs=srgb&fm=jpg&ixid=M3wzMjM4NDZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2OTM5MjY5OTJ8&ixlib=rb-4.0.3&q=85); }
/* … resto de paneles igual … */
.panel.p { background-image: url(https://images.unsplash.com/photo-1586693231040-e89840e7d805?crop=entropy&cs=srgb&fm=jpg&ixid=M3wzMjM4NDZ8MHwxfHJhbmRvbXx8fHx8fHx8fDE2OTM5MjczNDV8&ixlib=rb-4.0.3&q=85); }

.fade {
  background: linear-gradient(90deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.4) 30%, rgba(0,0,0,0.4) 70%, rgba(0,0,0,0) 100%);
  width: 860px;
  height: 200px;
  position: absolute;
  transform: rotateY(calc(var(--ang) * -1deg)) translateZ(110px);
  transition: all .5s ease-in-out;  
}

/* Botones a los lados */
.pagination {
  position: absolute;
  top: 50%;
  width: 100%;
  display: flex;
  justify-content: space-between;
  align-items: center;
  transform: translateY(-50%);
}

.pagination button {
  padding: 0;
  border: none;
  cursor: pointer;
  width: 44px;
  height: 44px;
  color: black;
  background: #fffa;
  font-family: 'Roboto', sans-serif;
  font-size: 20px;
  border-radius: 100%;
  transition: all .2s ease-in-out;
}

.pagination button:hover { background: #fffc; }
.pagination button:active { background: #ffff; }

#prev { margin-left: 20px; }
#next { margin-right: 20px; }

</style>
</head>
<body>
<div class="container">
  <div class="holder">  
    <div class="spinner">
      <div class="panel a"></div>
      <div class="panel b"></div>
      <div class="panel c"></div>
      <div class="panel d"></div>
      <div class="panel e"></div>
      <div class="panel f"></div>
      <div class="panel g"></div>
      <div class="panel h"></div>
      <div class="panel i"></div>
      <div class="panel j"></div>
      <div class="panel k"></div>
      <div class="panel l"></div>
      <div class="panel m"></div>
      <div class="panel n"></div>
      <div class="panel o"></div>
      <div class="panel p"></div>
      <div class="fade"></div>
    </div>
  </div>
  <div class="pagination">
    <button type="button" id="prev">&#8592;</button>
    <button type="button" id="next">&#8594;</button>
  </div>
</div>

<script>
var ang = 0;
var panels = 16;
var ang_unit = 360 / panels; // 22.5 grados
var zoom_scale = 1.3; // Solo el panel al frente

function updateSpinner() {
  $("*").css("--ang", ang);

  $(".panel").each(function(index) {
    var initial_ang = index * ang_unit; 
    var total_ang = (initial_ang + ang) % 360; 

    if (total_ang > 180) total_ang -= 360;
    if (total_ang < -180) total_ang += 360;

    var scale = 1;
    if (total_ang > -56 && total_ang < 56) {
      $(this).css("opacity", 1);
      $(this).css("pointer-events", "auto"); 
      if (Math.abs(total_ang) < ang_unit / 2) { scale = zoom_scale; }
    } else {
      $(this).css("opacity", 0);
      $(this).css("pointer-events", "none"); 
    }

    $(this).css("transform", `rotateY(${initial_ang}deg) translateZ(400px) scale(${scale})`);
  });
}

$("#prev").click(function(){ ang += ang_unit; updateSpinner(); });
$("#next").click(function(){ ang -= ang_unit; updateSpinner(); });
$(document).ready(function() { updateSpinner(); });
</script>
</body>
</html>
