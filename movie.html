<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tenshi | 幻想の響き</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    :root { --card-width:320px; --card-gap:30px; }
    body {
      font-family:'Helvetica Neue',sans-serif;
      background:#0b0b0b;
      color:#f5f5f5;
      overflow-x:hidden;
      width:100%;
      height:100%;
      transition: background 0.3s, color 0.3s;
    }
    body.light-mode { background:#f5f5f5; color:#111; }
    body.light-mode header,
    body.light-mode .news-card,
    body.light-mode .main-news { background-color:#fff; color:#111; }
    body.light-mode nav a { color:#333; }
    body.light-mode nav a:hover { color:#c59f3f; }
    body.light-mode .label { border-color:#c59f3f; color:#c59f3f; }
    body.light-mode .news,
    body.light-mode .discography,
    body.light-mode .videos { background-color:#f0f0f0; color:#111; box-shadow:0 0 20px rgba(0,0,0,0.1); }
    @keyframes shake {
      0%{ transform:translateX(0) scale(1.15); }
      2%{ transform:translateX(-0.5px) rotate(-0.5deg) scale(1.16); }
      5%{ transform:translateX(0.5px) rotate(0.5deg) scale(1.15); }
      7%{ transform:translateX(-0.5px) rotate(-0.5deg) scale(1.16); }
      100%{ transform:translateX(0) rotate(0deg) scale(1.15); }
    }
    header {
      position:fixed;
      top:0;
      width:100%;
      background:rgba(0,0,0,0.8);
      padding:20px 5%;
      display:flex;
      justify-content:space-between;
      align-items:center;
      z-index:999;
    }
    header .logo { color:#fff; font-size:20px; letter-spacing:2px; }
    nav ul { display:flex; gap:25px; list-style:none; }
    nav a {
      color:#ccc;
      text-decoration:none;
      font-size:14px;
      transition: all 0.3s ease;
      display:inline-block;
    }
    nav a:hover { color:#e0c27b; animation:shake 0.2s ease-in-out infinite alternate; }
    .theme-toggle {
      background:none;
      border:1px solid #777;
      color:#ccc;
      padding:6px 12px;
      border-radius:8px;
      cursor:pointer;
      transition: all 0.3s;
      font-size:12px;
      margin-left:20px;
    }
    .theme-toggle:hover { background:#e0c27b; color:#000; }
    .hero-wrapper { position:relative; height:75vh; overflow:hidden; margin-top:70px; }
    .hero-bg {
      position:absolute;
      top:0; left:0;
      width:100%; height:75vh;
      background:url('banner portada.png') center center no-repeat;
      background-size:cover;
      z-index:0;
    }
    .hero-text {
      position:relative; z-index:2;
      color:white;
      font-size:2rem;
      padding:60px 5%;
      height:75vh;
      display:flex;
      align-items:center;
      text-shadow:0 2px 10px rgba(0,0,0,0.6);
    }
    .news {
      padding:100px 5% 80px;
      background-color:#1a1a1a;
      max-width:1200px;
      margin:40px auto;
      border-radius:12px;
      box-shadow:0 0 30px rgba(0,0,0,0.3);
      transition: background 0.3s ease;
    }
    .news h2 {
      font-size:32px;
      color:#fff;
      margin-bottom:30px;
      text-align:center;
    }
    .news h2 span { font-size:14px; color:#ccc; margin-left:10px; }
    .schedule-filters { margin-bottom:40px; display:flex; justify-content:center; gap:20px; }
    .schedule-filters button {
      background:none;
      border:1px solid #555;
      color:#ccc;
      padding:8px 18px;
      font-size:14px;
      cursor:pointer;
      border-radius:20px;
      transition: all 0.3s ease;
    }
    .schedule-filters button.active,
    .schedule-filters button:hover { color:#e0c27b; border-color:#e0c27b; }
    .schedule-grid {
      display:grid;
      grid-template-columns:2fr 1fr 1fr;
      grid-template-rows:1fr 1fr;
      gap:20px;
    }
    .main-news {
      grid-column:1/2;
      grid-row:1/3;
      background:linear-gradient(135deg, #4c51bf);
      border-radius:16px;
      padding:20px;
      color:#fff;
      box-shadow:0 0 20px rgba(76,81,191,0.8);
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      overflow:hidden;
    }
    .news-card {
      background:#222;
      border-radius:14px;
      padding:20px;
      box-shadow:0 0 15px rgba(0,0,0,0.5);
      display:flex;
      flex-direction:column;
      justify-content:center;
      cursor:pointer;
      aspect-ratio:1/1;
      overflow:hidden;
      transition: transform 0.3s ease;
    }
    .news-card:hover { transform:scale(1.05); animation:shake 0.2s ease-in-out infinite alternate; }
    .news-card h4 { font-size:16px; font-weight:700; color:#fff; margin-bottom:8px; text-align:center; }
    .news-card .date { font-weight:700; font-size:14px; color:#ccc; text-align:center; margin-bottom:10px; }
    .news-card p { color:#ccc; font-size:14px; text-align:center; }
    .news-card .label { font-size:11px; color:#e0c27b; border:1px solid #e0c27b; padding:2px 6px; border-radius:999px; width:fit-content; margin:10px auto 0; display:block; }
    .section-banner {
      position:relative;
      width:110%;
      max-width:1800px;
      height:370px;
      margin:60px auto;
      border-radius:12px;
      background:url('banner portada.png') center center no-repeat;
      background-size:cover;
      box-shadow:0 0 20px rgba(0,0,0,0.5);
      display:flex;
      justify-content:center;
      align-items:center;
      color:#e0c27b;
      font-size:3rem;
      font-weight:900;
      font-family:'Yu Gothic UI','Hiragino Kaku Gothic Pro',Meiryo,sans-serif;
      text-shadow:0 0 15px rgba(224,194,123,0.7);
      user-select:none;
    }
    .carousel-container {
      position:relative;
      overflow:hidden;
      max-width:1200px;
      margin:0 auto;
      padding-top:40px;
      padding-bottom:40px;
    }
    .carousel-track { display:flex; gap:var(--card-gap); transition:transform 0.5s ease-in-out; }
    .carousel-btn {
      position:absolute;
      top:50%;
      transform:translateY(-50%);
      background:rgba(0,0,0,0.5);
      border:none;
      color:#e0c27b;
      font-size:2rem;
      cursor:pointer;
      z-index:10;
      padding:10px;
      border-radius:50%;
      transition:all 0.3s;
    }
    .carousel-btn:hover { background:rgba(0,0,0,0.8); }
    .carousel-btn.prev { left:10px; }
    .carousel-btn.next { right:10px; }
    .media-card {
      background:#222;
      border-radius:14px;
      padding:10px;
      width:var(--card-width);
      box-shadow:0 0 15px rgba(0,0,0,0.4);
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:space-between;
      flex-shrink:0;
      transition: transform 0.3s ease, box-shadow 0.3s ease, filter 0.5s ease;
      filter:grayscale(100%);
      cursor:pointer;
    }
    .media-card:hover { filter:grayscale(0%); animation:shake 0.2s ease-in-out infinite alternate; }
    .media-card img { width:100%; height:100%; border-radius:8px; object-fit:cover; margin-bottom:8px; aspect-ratio:16/9; }
    .media-card h4 { font-size:16px; text-align:center; margin-bottom:6px; color:#0fff00; }
    .media-card .label { font-size:11px; color:#0fff00; border:1px solid #0fff00; padding:2px 6px; border-radius:999px; }
    .media-card.center-card { filter:grayscale(0%); transform:scale(1.2); z-index:5; opacity:1; }
    .videos { padding-top:100px; padding-bottom:100px; }
    @media(max-width:900px){
      .schedule-grid { grid-template-columns:1fr; grid-template-rows:auto; }
      .section-banner { width:90%; height:120px; font-size:2rem; }
      :root { --card-width:260px; }
      .videos .media-card { width:150px; }
    }
    footer { padding:100px 0 50px; text-align:center; color:#ccc; letter-spacing:1px; }
    .social-bar { display:flex; justify-content:center; gap:30px; margin:60px auto; width:100%; }
    .social-bar a { display:inline-block; transition:transform 0.3s ease, fill 0.3s ease; }
    .social-bar svg { width:36px; height:36px; fill:#888; }
    .social-bar a:hover svg { fill:#e0c27b; transform:scale(1.15); }
    body.light-mode .social-bar svg { fill:#555; }
  </style>
</head>
<body>
  <header>
    <div class="logo">Tenshi</div>
    <nav>
      <ul>
        <li><a href="news.html">News</a></li>
        <li><a href="Discography.html">Discography</a></li>
        <li><a href="movie.html">Videos</a></li>
        <li><a href="wallpapers.html">Gallery</a></li>
      </ul>
    </nav>
    <button class="theme-toggle">Modo Claro</button>
  </header>

  <div class="hero-wrapper">
    <div class="hero-bg"></div>
    <div class="hero-text">幻想の響き</div>
  </div>

  <div class="section-banner">ビデオ</div>
  <section class="videos" id="videos">
    <div class="carousel-container" aria-label="Videos carousel">
      <div class="carousel-track" id="videos-track"></div>
      <button class="carousel-btn prev" aria-label="Anterior">‹</button>
      <button class="carousel-btn next" aria-label="Siguiente">›</button>
    </div>
  </section>

  <footer>
    <p>&copy; 2025 Tenshi. All rights reserved.</p>
  </footer>

  <script src="https://unpkg.com/basiclightbox@5.0.4/dist/basicLightbox.min.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/basiclightbox@5.0.4/dist/basicLightbox.min.css">

  <script>
    const API_KEY = 'TU_CLAVE_DE_API';
    const PLAYLIST_ID = 'PLkcZMdABSTfhe26NpsiFJev_0lCOcfCCf';

    async function fetchPlaylistVideos() {
      try {
        const response = await fetch(`https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=${PLAYLIST_ID}&key=${API_KEY}&maxResults=50`);
        if (!response.ok) throw new Error('Error al obtener videos de YouTube');
        const data = await response.json();
        return data.items || [];
      } catch (error) {
        console.error(error);
        return [];
      }
    }

    function renderVideos(videos) {
      const videoTrack = document.getElementById('videos-track');
      if (!videoTrack) return;
      videoTrack.innerHTML = '';
      videos.forEach(item => {
        const video = item.snippet;
        const videoId = video && video.resourceId ? video.resourceId.videoId : null;
        const title = video.title || 'Video';
        const thumbnailUrl = (video.thumbnails && (video.thumbnails.high || video.thumbnails.medium || video.thumbnails.default)) ? (video.thumbnails.high || video.thumbnails.medium || video.thumbnails.default).url : '';
        const card = document.createElement('div');
        card.className = 'media-card';
        card.innerHTML = `
          <img src="${thumbnailUrl}" alt="${title}">
          <h4>${title}</h4>
        `;
        if (videoId) {
          card.onclick = () => {
            basicLightbox.create(`
              <iframe src="https://www.youtube.com/embed/${videoId}?autoplay=1" width="880" height="495" frameborder="0" allow="autoplay" allowfullscreen></iframe>
            `).show();
          };
        }
        videoTrack.appendChild(card);
      });
    }

    function initVideoCarousel() {
      const track = document.getElementById('videos-track');
      const prevBtn = document.querySelector('.videos .carousel-btn.prev');
      const nextBtn = document.querySelector('.videos .carousel-btn.next');
      const container = track.parentElement;
      if (!track || !prevBtn || !nextBtn || !container) return;

      let isTransitioning = false;
      let cards = Array.from(track.children);
      const visibleCards = 3;
      const totalCards = cards.length;

      if (totalCards < visibleCards) return;

      const startClones = cards.slice(0, visibleCards).map(node => node.cloneNode(true));
      const endClones = cards.slice(-visibleCards).map(node => node.cloneNode(true));

      startClones.forEach(clone => track.appendChild(clone));
      endClones.reverse().forEach(clone => track.insertBefore(clone, track.firstChild));

      cards = Array.from(track.children);
      let currentIndex = visibleCards;

      function updateCarousel(smooth = true) {
        if (isTransitioning) return;
        isTransitioning = true;
        const cardCenter = cards[currentIndex].offsetLeft + cards[currentIndex].offsetWidth / 2;
        const containerCenter = container.offsetWidth / 2;
        const newTransform = -(cardCenter - containerCenter);
        track.style.transition = smooth ? 'transform 0.5s ease-in-out' : 'none';
        track.style.transform = `translateX(${newTransform}px)`;
        cards.forEach(card => card.classList.remove('center-card'));
        cards[currentIndex].classList.add('center-card');
      }

      track.addEventListener('transitionend', () => {
        isTransitioning = false;
        if (currentIndex >= totalCards + visibleCards) currentIndex = visibleCards;
        else if (currentIndex < visibleCards) currentIndex = totalCards + currentIndex;
      });

      prevBtn.addEventListener('click', () => {
        if (isTransitioning) return;
        currentIndex--;
        updateCarousel();
      });

      nextBtn.addEventListener('click', () => {
        if (isTransitioning) return;
        currentIndex++;
        updateCarousel();
      });

      let autoplay = setInterval(() => { currentIndex++; updateCarousel(); }, 4000);
      container.addEventListener('mouseenter', () => clearInterval(autoplay));
      container.addEventListener('mouseleave', () => {
        autoplay = setInterval(() => { currentIndex++; updateCarousel(); }, 4000);
      });

      updateCarousel();
      window.addEventListener('resize', () => updateCarousel(false));
    }

    window.addEventListener('DOMContentLoaded', () => {
      fetchPlaylistVideos().then(videos => {
        renderVideos(videos);
        initVideoCarousel();
      });
    });

    const themeToggle = document.querySelector('.theme-toggle');
    themeToggle.addEventListener('click', () => {
      document.body.classList.toggle('light-mode');
      themeToggle.textContent = document.body.classList.contains('light-mode') ? 'Modo Oscuro' : 'Modo Claro';
    });
  </script>
</body>
</html>
