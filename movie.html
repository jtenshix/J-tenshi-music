<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>3D Spinner 5 Paneles</title>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Roboto:wght@900&display=swap');

  html, body { height: 100%; margin: 0; }
  body { background: black; display: flex; justify-content: center; align-items: center; flex-direction: column; }

  .container { display: flex; align-items: center; justify-content: center; position: relative; }
  .holder { width: 600px; height: 200px; display: flex; justify-content: center; align-items: center; perspective: 700px; perspective-origin: center; }
  
  .spinner { transform-style: preserve-3d; position: relative; display: flex; align-items: center; justify-content: center; transition: all .5s ease-in-out; }

  .panel {
    border-radius: 5px;
    width: 100px; height: 100px;
    position: absolute;
    background-size: cover; background-position: center;
    transition: transform .5s ease, opacity .5s ease;
  }

  .fade {
    background: linear-gradient(90deg, rgba(0,0,0,0) 0%, rgba(0,0,0,0.4) 30%, rgba(0,0,0,0.4) 70%, rgba(0,0,0,0) 100%);
    width: 600px; height: 200px;
    position: absolute; pointer-events: none;
  }

  .pagination {
    position: absolute; top: 50%;
    width: 100%; display: flex;
    justify-content: space-between; align-items: center;
    transform: translateY(-50%);
  }

  .pagination button {
    padding: 0; border: none; cursor: pointer;
    width: 44px; height: 44px;
    color: black; background: #fffa;
    font-family: 'Roboto', sans-serif; font-size: 20px;
    border-radius: 100%; transition: all .2s ease-in-out;
  }
  .pagination button:hover { background: #fffc; }
  .pagination button:active { background: #ffff; }
</style>
</head>
<body>

<div class="container">
  <div class="holder">
    <div class="spinner">
      <div class="panel a" style="background-image: url('https://images.unsplash.com/photo-1516727003284-a96541e51e9c');"></div>
      <div class="panel b" style="background-image: url('https://images.unsplash.com/photo-1691389694412-266f872999c6');"></div>
      <div class="panel c" style="background-image: url('https://images.unsplash.com/photo-1606391901318-07003db08d63');"></div>
      <div class="panel d" style="background-image: url('https://images.unsplash.com/photo-1610785396756-24bd1889ddae');"></div>
      <div class="panel e" style="background-image: url('https://images.unsplash.com/photo-1505849871170-7f94cf84f4d2');"></div>
      <div class="fade"></div>
    </div>
  </div>

  <div class="pagination">
    <button id="prev">&#8592;</button>
    <button id="next">&#8594;</button>
  </div>
</div>

<script>
var ang = 0;
var panels = 5;
var ang_unit = 360 / panels;
var zoom_scale = 1.5;

function updateSpinner() {
  $(".panel").each(function(index){
    var totalIndex = (index + panels) % panels; // loop
    var offset = index * ang_unit + ang;
    var normalized = ((offset + 180) % 360) - 180;

    // Visibilidad
    if(Math.abs(normalized) > 90) {
      $(this).css("opacity", 0);
    } else {
      $(this).css("opacity", 1);
    }

    // Zoom del panel del frente
    var scale = Math.abs(normalized) < ang_unit/2 ? zoom_scale : 1;
    $(this).css("transform", `rotateY(${index*ang_unit}deg) translateZ(200px) scale(${scale})`);
  });
}

$("#prev").click(function(){ ang += ang_unit; updateSpinner(); });
$("#next").click(function(){ ang -= ang_unit; updateSpinner(); });

$(document).ready(function(){ updateSpinner(); });
</script>

</body>
</html>
