<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tenshi | 幻想の響き</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    :root {
      --card-width: 320px;
      --card-gap: 30px;
    }
    body {
      font-family: 'Helvetica Neue', sans-serif;
      background: #0b0b0b;
      color: #f5f5f5;
      overflow-x: hidden;
      width: 100%;
      height: 100%;
      transition: background 0.3s, color 0.3s;
    }
    body.light-mode {
      background: #f5f5f5;
      color: #111;
    }
    body.light-mode header,
    body.light-mode .news-card,
    body.light-mode .main-news {
      background-color: #fff;
      color: #111;
    }
    body.light-mode nav a {
      color: #333;
    }
    body.light-mode nav a:hover {
      color: #c59f3f;
    }
    body.light-mode .label {
      border-color: #c59f3f;
      color: #c59f3f;
    }
    body.light-mode .news,
    body.light-mode .discography,
    body.light-mode .videos {
      background-color: #f0f0f0;
      color: #111;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
    }
    @keyframes shake {
      0% { transform: translateX(0) scale(1.15); }
      2% { transform: translateX(-0.5px) rotate(-0.5deg) scale(1.16); }
      5% { transform: translateX(0.5px) rotate(0.5deg) scale(1.15); }
      7% { transform: translateX(-0.5px) rotate(-0.5deg) scale(1.16); }
      100% { transform: translateX(0) rotate(0deg) scale(1.15); }
    }
    header {
      position: fixed;
      top: 0;
      width: 100%;
      background: rgba(0, 0, 0, 0.8);
      padding: 20px 5%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 999;
    }
    header .logo {
      color: #fff;
      font-size: 20px;
      letter-spacing: 2px;
    }
    nav ul {
      display: flex;
      gap: 25px;
      list-style: none;
    }
    nav a {
      color: #ccc;
      text-decoration: none;
      font-size: 14px;
      transition: all 0.3s ease;
      display: inline-block;
    }
    nav a:hover {
      color: #e0c27b;
      animation: shake 0.2s ease-in-out infinite alternate;
    }
    .theme-toggle {
      background: none;
      border: 1px solid #777;
      color: #ccc;
      padding: 6px 12px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s;
      font-size: 12px;
      margin-left: 20px;
    }
    .theme-toggle:hover {
      background: #e0c27b;
      color: #000;
    }
    .hero-wrapper {
      position: relative;
      height: 75vh;
      overflow: hidden;
      margin-top: 70px;
    }
    .hero-bg {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 75vh;
      background: url('banner portada.png') center center no-repeat;
      background-size: cover;
      z-index: 0;
    }
    .hero-text {
      position: relative;
      z-index: 2;
      color: white;
      font-size: 2rem;
      padding: 60px 5%;
      height: 75vh;
      display: flex;
      align-items: center;
      text-shadow: 0 2px 10px rgba(0, 0, 0, 0.6);
    }
    .news {
      padding: 100px 5% 80px;
      background-color: #1a1a1a;
      max-width: 1200px;
      margin: 40px auto;
      border-radius: 12px;
      box-shadow: 0 0 30px rgba(0, 0, 0, 0.3);
      transition: background 0.3s ease;
    }
    .news h2 {
      font-size: 32px;
      color: #fff;
      margin-bottom: 30px;
      text-align: center;
    }
    .news h2 span {
      font-size: 14px;
      color: #ccc;
      margin-left: 10px;
    }
    .schedule-filters {
      margin-bottom: 40px;
      display: flex;
      justify-content: center;
      gap: 20px;
    }
    .schedule-filters button {
      background: none;
      border: 1px solid #555;
      color: #ccc;
      padding: 8px 18px;
      font-size: 14px;
      cursor: pointer;
      border-radius: 20px;
      transition: all 0.3s ease;
    }
    .schedule-filters button.active,
    .schedule-filters button:hover {
      color: #e0c27b;
      border-color: #e0c27b;
    }
    .schedule-grid {
      display: grid;
      grid-template-columns: 2fr 1fr 1fr;
      grid-template-rows: 1fr 1fr;
      gap: 20px;
    }
    .main-news {
      grid-column: 1 / 2;
      grid-row: 1 / 3;
      background: linear-gradient(135deg, #4c51bf);
      border-radius: 16px;
      padding: 20px;
      color: #fff;
      box-shadow: 0 0 20px rgba(76, 81, 191, 0.8);
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      overflow: hidden;
    }
    .news-card {
      background: #222;
      border-radius: 14px;
      padding: 20px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
      display: flex;
      flex-direction: column;
      justify-content: center;
      cursor: pointer;
      aspect-ratio: 1 / 1;
      overflow: hidden;
      transition: transform 0.3s ease;
    }
    .news-card:hover {
      transform: scale(1.05);
      animation: shake 0.2s ease-in-out infinite alternate;
    }
    .news-card h4 {
      font-size: 16px;
      font-weight: 700;
      color: #fff;
      margin-bottom: 8px;
      text-align: center;
    }
    .news-card .date {
      font-weight: 700;
      font-size: 14px;
      color: #ccc;
      text-align: center;
      margin-bottom: 10px;
    }
    .news-card p {
      color: #ccc;
      font-size: 14px;
      text-align: center;
    }
    .news-card .label {
      font-size: 11px;
      color: #e0c27b;
      border: 1px solid #e0c27b;
      padding: 2px 6px;
      border-radius: 999px;
      width: fit-content;
      margin: 10px auto 0;
      display: block;
    }
    .section-banner {
      position: relative;
      width: 110%;
      max-width: 1800px;
      height: 370px;
      margin: 60px auto;
      border-radius: 12px;
      background: url('banner portada.png') center center no-repeat;
      background-size: cover;
      box-shadow: 0 0 20px rgba(0, 0, 0, 0.5);
      display: flex;
      justify-content: center;
      align-items: center;
      color: #e0c27b;
      font-size: 3rem;
      font-weight: 900;
      font-family: 'Yu Gothic UI', 'Hiragino Kaku Gothic Pro', Meiryo, sans-serif;
      text-shadow: 0 0 15px rgba(224, 194, 123, 0.7);
      user-select: none;
    }
    .carousel-container {
      position: relative;
      overflow: hidden;
      max-width: 1200px;
      margin: 0 auto;
      padding-top: 40px;
      padding-bottom: 40px;
    }
    .carousel-track {
      display: flex;
      gap: var(--card-gap);
      transition: transform 0.5s ease-in-out;
    }
    .carousel-btn {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      background: rgba(0, 0, 0, 0.5);
      border: none;
      color: #e0c27b;
      font-size: 2rem;
      cursor: pointer;
      z-index: 10;
      padding: 10px;
      border-radius: 50%;
      transition: all 0.3s;
    }
    .carousel-btn:hover {
      background: rgba(0, 0, 0, 0.8);
    }
    .carousel-btn.prev {
      left: 10px;
    }
    .carousel-btn.next {
      right: 10px;
    }
    .media-card {
      background: #222;
      border-radius: 14px;
      padding: 10px;
      width: 300px;
      height: 300px;
      box-shadow: 0 0 15px rgba(0, 0, 0, 0.4);
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: space-between;
      flex-shrink: 0;
      transition: transform 0.3s ease, box-shadow 0.3s ease, filter 0.5s ease;
      filter: grayscale(100%);
      cursor: pointer;
    }
    .media-card:hover {
      filter: grayscale(0%);
      animation: shake 0.2s ease-in-out infinite alternate;
    }
    .media-card img {
      width: 100%;
      height: 100%;
      border-radius: 8px;
      object-fit: cover;
      margin-bottom: 8px;
      aspect-ratio: 16 / 9;
    }
    .media-card h4 {
      font-size: 16px;
      text-align: center;
      margin-bottom: 6px;
    }
    .media-card .label {
      font-size: 11px;
      color: #e0c27b;
      border: 1px solid #e0c27b;
      padding: 2px 6px;
      border-radius: 999px;
      width: fit-content;
      margin: 10px auto 0;
      display: block;
    }
    .media-card.center-card {
      filter: grayscale(0%);
      transform: scale(1.1);
      z-index: 5;
    }
    .videos .carousel-container {
      width: 100%;
      max-width: 1000px;
      margin: 0 auto;
      overflow: hidden;
      position: relative;
      padding: 0;
    }
    .videos .carousel-track {
      display: flex;
      align-items: center;
      transition: transform 0.5s ease-in-out;
    }
    .videos .media-card {
      width: 300px;
      margin: 0 10px;
      flex-shrink: 0;
      opacity: 0.6;
      transform: scale(0.9);
      transition: transform 0.3s ease, opacity 0.3s ease;
    }
    .videos {
      padding-top: 100px;
      padding-bottom: 100px;
    }
    .videos .media-card.center-card {
      transform: scale(1.2);
      opacity: 1;
      z-index: 2;
    }
    @media (max-width: 900px) {
      .schedule-grid {
        grid-template-columns: 1fr;
        grid-template-rows: auto;
      }
      .section-banner {
        width: 90%;
        height: 120px;
        font-size: 2rem;
      }
      :root {
        --card-width: 260px;
      }
      .videos .media-card {
        width: 150px;
      }
    }
    footer {
      padding: 100px 0 50px;
      text-align: center;
      color: #ccc;
      letter-spacing: 1px;
    }
    .social-bar {
      display: flex;
      justify-content: center;
      gap: 30px;
      margin: 60px auto;
      width: 100%;
    }
    .social-bar a {
      display: inline-block;
      transition: transform 0.3s ease, fill 0.3s ease;
    }
    .social-bar svg {
      width: 36px;
      height: 36px;
      color: #fff; /* Blanco por defecto */
      transition: transform 0.3s ease, color 0.3s ease;
    }
    .social-bar a:hover svg {
      color: #e0c27b; /* Dorado al pasar el mouse */
      transform: scale(1.15);
    }
    body.light-mode .social-bar svg {
      color: #555; /* Gris claro en modo claro */
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">Tenshi</div>
    <nav>
      <ul>
        <li><a href="news.html">News</a></li>
        <li><a href="Discography.html" id="link-discography">Discography</a></li>
        <li><a href="movie.html">Videos</a></li>
        <li><a href="wallpapers.html">Gallery</a></li>
        <li><a href="My Studio.html">My Studio</a></li>
      </ul>
    </nav>
    <button class="theme-toggle" onclick="toggleTheme()">Modo Claro / Oscuro</button>
  </header>
  <div class="hero-wrapper">
    <div class="hero-bg"></div>
    <div class="hero-text">Bienvenido a Tenshi | 幻想の響き</div>
  </div>
  <div class="contenedor-centrado">
    <div class="social-bar">
      <!-- Twitter/X -->
      <a href="https://twitter.com/TU_USUARIO" target="_blank" rel="noopener noreferrer" aria-label="Twitter">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path d="M18.244 2H21.985L14.367 11.29L23 22H16.398L11.297 15.66L5.462 22H1.715L9.833 12.18L1.67 2H8.444L13.04 7.72L18.244 2ZM17.09 20.15H18.91L7.004 3.74H5.053L17.09 20.15Z" fill="currentColor"/>
        </svg>
      </a>
      <!-- Instagram -->
      <a href="https://instagram.com/TU_USUARIO" target="_blank" rel="noopener noreferrer" aria-label="Instagram">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path d="M7 2C4.2 2 2 4.2 2 7V17C2 19.8 4.2 22 7 22H17C19.8 22 22 19.8 22 17V7C22 4.2 19.8 2 17 2H7ZM12 7C14.8 7 17 9.2 17 12C17 14.8 14.8 17 12 17C9.2 17 7 14.8 7 12C7 9.2 9.2 7 12 7ZM18 6.5C18.6 6.5 19 6.9 19 7.5C19 8.1 18.6 8.5 18 8.5C17.4 8.5 17 8.1 17 7.5C17 6.9 17.4 6.5 18 6.5Z" fill="currentColor"/>
        </svg>
      </a>
      <!-- YouTube -->
      <a href="https://youtube.com/@TU_CANAL" target="_blank" rel="noopener noreferrer" aria-label="YouTube">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path d="M21.8 8.001C21.53 6.83 20.63 5.93 19.46 5.661C17.34 5.161 12 5.161 12 5.161C12 5.161 6.66 5.161 4.54 5.661C3.37 5.93 2.47 6.83 2.2 8.001C1.7 10.121 1.7 12.001 1.7 12.001C1.7 12.001 1.7 13.881 2.2 16.001C2.47 17.17 3.37 18.07 4.54 18.34C6.66 18.84 12 18.84 12 18.84C12 18.84 17.34 18.84 19.46 18.34C20.63 18.07 21.53 17.17 21.8 16.001C22.3 13.881 22.3 12.001 22.3 12.001C22.3 12.001 22.3 10.121 21.8 8.001ZM10 15.002V9.002L15.5 12.002L10 15.002Z" fill="currentColor"/>
        </svg>
      </a>
      <!-- Spotify -->
      <a href="https://open.spotify.com/artist/TU_USUARIO" target="_blank" rel="noopener noreferrer" aria-label="Spotify">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 17c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6zm4-8.5c0 1.93-1.57 3.5-3.5 3.5S8.5 11.43 8.5 9.5c0-1.93 1.57-3.5 3.5-3.5s3.5 1.57 3.5 3.5z" fill="currentColor"/>
        </svg>
      </a>
      <!-- Apple Music -->
      <a href="https://music.apple.com/artist/TU_USUARIO" target="_blank" rel="noopener noreferrer" aria-label="Apple Music">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path d="M18.71 19.5c-.83 1.24-1.71 2.45-3.05 2.47-1.34.03-1.77-.79-3.29-.79-1.53 0-2 .77-3.27.82-1.31-.05-2.37-1.14-3.18-2.33C4.24 18.85 3 15.81 3 12.47 3 8.21 7.4 4.47 12.05 4.22c2.13-.12 4.2.87 5.78 2.45 1.54 1.55 2.48 3.61 2.48 5.81 0 1.31-.47 2.58-1.34 3.69-.24.31-.55.6-.89.84.32.2.65.38 1 .52.22.09.46.14.7.14.25 0 .5-.05.73-.15.85-.45 1.38-1.28 1.53-2.38.1-.76-.23-1.46-.94-1.8-1.05-.55-2.35-.19-3.15.95-.6.91-1.5 2.95-1.74 3.85-.41 1.51.56 2.5 1.38 3.11.28.2.66.34 1.05.34.37 0 .73-.13 1.04-.34.3-.2 1.12-.67 2.07-1.7.62-.65 1.65-1.68 1.65-3.41 0-1.47-.6-2.55-1.15-3.26-.43-.54-1.04-.85-1.69-.85-.87 0-1.53.54-1.8 1.35-.38.91-.07 2.15.85 2.85.67.52 1.5.86 2.3.86.78 0 1.5-.31 1.98-.8.65-.65.98-1.55.98-2.5 0-.69-.23-1.34-.61-1.85-.66-.91-1.53-1.43-2.57-1.42-.82 0-1.55.47-2.05 1.25-.4.63-.4 1.49-.4 2.38 0 .9.27 1.74.77 2.49.5.75 1.28 1.29 2.15 1.53 1.65.44 3.45-.5 4.34-2.04.37-.63.48-1.36.48-2.12 0-.58-.08-1.13-.23-1.64-.43-1.37-1.5-2.31-2.91-2.35-1.32-.03-2.45.82-3.1 2.04-.26.51-.78.9-1.35.9-.57 0-1.03-.47-1.03-1.04 0-.55.45-1.01 1.01-1.04.5-.02 1.04.35 1.3.85.26.5.24 1.05.24 1.58 0 1.14-.6 2.06-1.35 2.55-.55.35-1.28.53-1.98.53-.75 0-1.42-.25-1.95-.71-.49-.42-.75-1.07-.75-1.78 0-.68.23-1.32.64-1.83.82-1.04 2.38-1.28 3.33-.76.54.29.9.85 1.06 1.48.23.91.24 1.85.24 2.75 0 .89-.19 1.74-.53 2.51z" fill="currentColor"/>
        </svg>
      </a>
      <!-- Facebook -->
      <a href="https://facebook.com/TU_USUARIO" target="_blank" rel="noopener noreferrer" aria-label="Facebook">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
          <path d="M18 2h-3c-.55 0-1 .45-1 1v3h-4v-3c0-.55-.45-1-1-1H7c-.55 0-1 .45-1 1v3H4c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h16c.55 0 1-.45 1-1V6l-5-4zM7 6h4v4H7V6zm12 13h-3.5v-4.5c0-1-.5-2-2-2h-3c-1.5 0-2 .5-2 2v4.5H7V9h3V7.5c0-1.5 1-2 2.5-2C14 5.5 15 6 15 7.5V9h5l-1 4h-4v6z" fill="currentColor"/>
        </svg>
      </a>
    </div>
  </div>
  <section class="news" id="news">
    <h2>NEWS <span>ニュース</span></h2>
    <nav class="schedule-filters">
      <button class="active">Todos</button>
      <button>Conciertos</button>
      <button>Lanzamientos</button>
      <button>Eventos</button>
    </nav>
    <div class="schedule-grid">
      <article class="main-news">
        <div class="date">08 JUL 2025</div>
        <h3>Gran Concierto de Tenshi en Tokio</h3>
        <p>El esperado concierto en el Nippon será el evento del año.</p>
        <span class="label new">NEW</span>
      </article>
      <div class="news-card">
        <div class="date">07 JUL 2025</div>
        <h4>Nuevo sencillo</h4>
        <p>"Shinkai no Melody" disponible ya.</p>
        <span class="label">RELEASE</span>
      </div>
      <div class="news-card">
        <div class="date">05 JUL 2025</div>
        <h4>Evento online</h4>
        <p>Streaming con sorpresas.</p>
        <span class="label">EVENT</span>
      </div>
      <div class="news-card">
        <div class="date">03 JUL 2025</div>
        <h4>Premio ganado</h4>
        <p>Mejor artista emergente.</p>
        <span class="label">AWARD</span>
      </div>
      <div class="news-card">
        <div class="date">09 JUL 2025</div>
        <h4>Nuevo Wallpaper</h4>
        <p>Descarga el nuevo wallpaper oficial.</p>
        <span class="label new">NEW</span>
      </div>
    </div>
  </section>
  <div class="section-banner">ディスコグラフィー</div>
  <section class="discography" id="discography">
    <div class="carousel-container" aria-label="Discography carousel">
      <div class="carousel-track" id="discography-track">
      </div>
      <button class="carousel-btn prev" aria-label="Anterior">‹</button>
      <button class="carousel-btn next" aria-label="Siguiente">›</button>
    </div>
  </section>
  <div class="section-banner">ビデオ</div>
  <section class="videos" id="videos">
    <div class="carousel-container" aria-label="Videos carousel">
      <div class="carousel-track" id="videos-track">
      </div>
      <button class="carousel-btn prev" aria-label="Anterior">‹</button>
      <button class="carousel-btn next" aria-label="Siguiente">›</button>
    </div>
  </section>
  <footer>
    <div class="social-bar">
    </div>
    <p>j-tenshiwebcomingsoon</p>
  </footer>
  <script src="https://cdn.jsdelivr.net/npm/basiclightbox@5.0.4/dist/basicLightbox.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/basiclightbox@5.0.4/dist/basicLightbox.min.css">
  <script>
    function toggleTheme() {
      document.body.classList.toggle('light-mode');
      localStorage.setItem('theme', document.body.classList.contains('light-mode') ? 'light' : 'dark');
    }
    if (localStorage.getItem('theme') === 'light') {
      document.body.classList.add('light-mode');
    }
    const API_KEY = 'TU_CLAVE_DE_API';
    const VIDEOS_PLAYLIST_ID = 'PLkcZMdABSTfhe26NpsiFJev_0lCOcfCCf';
    const DISCRO_PLAYLIST_ID = 'PLkcZMdABSTfh-9nA5PElNlK7GL2luMi6j';

    async function fetchDiscographyVideos() {
      try {
        const response = await fetch(`https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=${DISCRO_PLAYLIST_ID}&key=${API_KEY}&maxResults=50`);
        if (!response.ok) throw new Error('Error al obtener videos de la discografía');
        const data = await response.json();
        return data.items || [];
      } catch (error) {
        console.error(error);
        return [];
      }
    }

    async function fetchPlaylistVideos() {
      try {
        const response = await fetch(`https://www.googleapis.com/youtube/v3/playlistItems?part=snippet&playlistId=${VIDEOS_PLAYLIST_ID}&key=${API_KEY}&maxResults=50`);
        if (!response.ok) throw new Error('Error al obtener videos');
        const data = await response.json();
        return data.items || [];
      } catch (error) {
        console.error(error);
        return [];
      }
    }

    function renderVideos(videos) {
      const videoTrack = document.getElementById('videos-track');
      if (!videoTrack) return;
      videoTrack.innerHTML = '';
      videos.forEach(item => {
        const video = item.snippet;
        const videoId = video && video.resourceId ? video.resourceId.videoId : null;
        const title = video.title || 'Video';
        const thumbnailUrl = (video.thumbnails && (video.thumbnails.high || video.thumbnails.medium || video.thumbnails.default)) ? (video.thumbnails.high || video.thumbnails.medium || video.thumbnails.default).url : '';
        const card = document.createElement('div');
        card.className = 'media-card';
        card.innerHTML = `
          <img src="${thumbnailUrl}" alt="${title}">
          <h4>${title}</h4>
        `;
        if (videoId) {
          card.onclick = () => {
            basicLightbox.create(`
              <iframe src="https://www.youtube.com/embed/${videoId}?autoplay=1" width="880" height="495" frameborder="0" allow="autoplay" allowfullscreen></iframe>
            `).show();
          };
        }
        videoTrack.appendChild(card);
      });
    }

    function getBestThumb(snippet) {
      const t = (snippet && snippet.thumbnails) || {};
      return (
        (t.maxres && t.maxres.url) ||
        (t.standard && t.standard.url) ||
        (t.high && t.high.url) ||
        (t.medium && t.medium.url) ||
        (t.default && t.default.url) ||
        ''
      );
    }

    function renderDiscography(items) {
      const track = document.getElementById('discography-track');
      if (!track) return;
      track.innerHTML = '';
      items.forEach(item => {
        const s = item.snippet || {};
        const title = s.title || 'Track';
        const videoId = s.resourceId ? s.resourceId.videoId : null;
        const imgUrl = getBestThumb(s);
        const card = document.createElement('div');
        card.className = 'media-card';
        if (videoId) {
          card.innerHTML = `
            <a href="https://www.youtube.com/watch?v=${videoId}" target="_blank" rel="noopener noreferrer">
              <img src="${imgUrl}" alt="${title}" title="${title}">
            </a>
          `;
        } else {
          card.innerHTML = `<img src="${imgUrl}" alt="${title}" title="${title}">`;
        }
        track.appendChild(card);
      });
    }

    function initCarousel(options) {
      const track = document.getElementById(options.trackId);
      const prevBtn = document.querySelector(options.prevSelector);
      const nextBtn = document.querySelector(options.nextSelector);
      const container = track.parentElement;
      if (!track || !prevBtn || !nextBtn || !container) return;
      let isTransitioning = false;
      const visibleCards = 3;
      let cards = Array.from(track.children);
      const totalCards = cards.length;
      if (totalCards < visibleCards) return;
      const startClones = cards.slice(0, visibleCards).map(node => node.cloneNode(true));
      const endClones = cards.slice(-visibleCards).map(node => node.cloneNode(true));
      startClones.forEach(clone => track.appendChild(clone));
      endClones.reverse().forEach(clone => track.insertBefore(clone, track.firstChild));
      cards = Array.from(track.children);
      let currentIndex = visibleCards;

      if (options.type === 'center-focus') {
        function updateVideoCarousel(smoothTransition = true) {
          if (isTransitioning) return;
          isTransitioning = true;
          const cardCenter = cards[currentIndex].offsetLeft + (cards[currentIndex].offsetWidth / 2);
          const containerCenter = container.offsetWidth / 2;
          const newTransform = -(cardCenter - containerCenter);
          track.style.transition = smoothTransition ? 'transform 0.5s ease-in-out' : 'none';
          track.style.transform = `translateX(${newTransform}px)`;
          cards.forEach((card, index) => {
            card.classList.remove('center-card');
          });
          cards[currentIndex].classList.add('center-card');
        }

        track.addEventListener('transitionend', () => {
          isTransitioning = false;
          if (currentIndex >= totalCards + visibleCards) {
            currentIndex = visibleCards;
            updateVideoCarousel(false);
          } else if (currentIndex < visibleCards) {
            currentIndex = totalCards + currentIndex;
            updateVideoCarousel(false);
          }
        });

        prevBtn.addEventListener('click', () => {
          if (isTransitioning) return;
          currentIndex--;
          updateVideoCarousel();
        });

        nextBtn.addEventListener('click', () => {
          if (isTransitioning) return;
          currentIndex++;
          updateVideoCarousel();
        });

        let autoplayInterval = setInterval(() => {
          if (!isTransitioning) {
            currentIndex++;
            updateVideoCarousel();
          }
        }, 4000);

        container.addEventListener('mouseenter', () => clearInterval(autoplayInterval));
        container.addEventListener('mouseleave', () => {
          autoplayInterval = setInterval(() => {
            if (!isTransitioning) {
              currentIndex++;
              updateVideoCarousel();
            }
          }, 4000);
        });

        updateVideoCarousel();
        window.addEventListener('resize', () => {
          updateVideoCarousel(false);
        });
      }
    }

    window.addEventListener('DOMContentLoaded', () => {
      fetchPlaylistVideos().then(videos => {
        renderVideos(videos);
        const videosTrack = document.getElementById('videos-track');
        if (videosTrack && videosTrack.children.length >= 3) {
          initCarousel({
            trackId: 'videos-track',
            prevSelector: '.videos .carousel-btn.prev',
            nextSelector: '.videos .carousel-btn.next',
            type: 'center-focus'
          });
        }
      });

      fetchDiscographyVideos().then(discoVideos => {
        renderDiscography(discoVideos);
        const discographyTrack = document.getElementById('discography-track');
        if (discographyTrack && discographyTrack.children.length >= 3) {
          initCarousel({
            trackId: 'discography-track',
            prevSelector: '.discography .carousel-btn.prev',
            nextSelector: '.discography .carousel-btn.next',
            type: 'center-focus'
          });
        }
      });
    });
  </script>
</body>
</html>
