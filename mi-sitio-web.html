<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tenshi | 幻想の響き</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Fuentes atrevidas, juveniles, anime -->
  <link href="https://fonts.googleapis.com/css2?family=Bangers&family=M+PLUS+Rounded+1c:wght@700;900&family=Poppins:wght@600;800&display=swap" rel="stylesheet">
  <style>
    /* === RESETEO === */
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root {
      --yellow: #FFD60A;
      --yellow-dark: #E6B800;
      --black: #0F0F0F;
      --dark: #1C1C1C;
      --gray: #2A2A2A;
      --light-gray: #3A3A3A;
      --ang: 0;
      --angVid: 0;
      --glow: 0 0 20px rgba(255, 214, 10, 0.6);
      --transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    }

    /* === BASE === */
    body {
      font-family: 'Poppins', 'M PLUS Rounded 1c', sans-serif;
      background: var(--black);
      color: var(--yellow);
      overflow-x: hidden;
      line-height: 1.6;
      scroll-padding-top: 90px;
      background-image: 
        radial-gradient(circle at 10% 20%, rgba(255, 214, 10, 0.08) 0%, transparent 50%),
        radial-gradient(circle at 90% 80%, rgba(255, 214, 10, 0.08) 0%, transparent 50%);
    }
    body.light-mode {
      background: #111;
      color: var(--yellow);
    }

    /* === TIPOGRAFÍA ATREVIDA === */
    h1, h2, h3, .logo, .banner-title {
      font-family: 'Bangers', 'M PLUS Rounded 1c', cursive;
      text-transform: uppercase;
      letter-spacing: 3px;
      font-weight: 900;
    }
    h2 {
      font-size: 3.2rem;
      text-align: center;
      margin: 80px 0 40px;
      position: relative;
      color: var(--yellow);
      text-shadow: var(--glow);
    }
    h2::after {
      content: '';
      display: block;
      width: 150px;
      height: 8px;
      background: var(--yellow);
      margin: 20px auto;
      border-radius: 4px;
      box-shadow: var(--glow);
    }

    /* === HEADER === */
    header {
      position: fixed;
      top: 0; width: 100%;
      background: rgba(15, 15, 15, 0.98);
      backdrop-filter: blur(15px);
      padding: 20px 5%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 999;
      border-bottom: 4px solid var(--yellow);
      box-shadow: 0 8px 30px rgba(255, 214, 10, 0.2);
    }
    .logo {
      font-size: 36px;
      color: var(--yellow);
      text-shadow: var(--glow);
      letter-spacing: 2px;
    }
    nav ul {
      display: flex;
      gap: 40px;
      list-style: none;
    }
    nav a {
      color: #ddd;
      text-decoration: none;
      font-weight: 700;
      font-size: 16px;
      transition: var(--transition);
      position: relative;
      padding: 8px 0;
    }
    nav a::after {
      content: '';
      position: absolute;
      bottom: 0; left: 50%;
      width: 0; height: 4px;
      background: var(--yellow);
      transition: var(--transition);
      transform: translateX(-50%);
      border-radius: 2px;
    }
    nav a:hover {
      color: var(--yellow);
      text-shadow: var(--glow);
    }
    nav a:hover::after { width: 100%; }
    .theme-toggle {
      background: var(--yellow);
      color: var(--black);
      border: none;
      padding: 12px 24px;
      border-radius: 50px;
      cursor: pointer;
      font-weight: 900;
      font-size: 14px;
      transition: var(--transition);
      box-shadow: var(--glow);
      font-family: 'Bangers', cursive;
    }
    .theme-toggle:hover {
      background: var(--black);
      color: var(--yellow);
      transform: scale(1.05);
    }

    /* === HERO === */
    .hero-wrapper {
      position: relative;
      height: 90vh;
      overflow: hidden;
      margin-top: 70px;
      border-bottom: 8px solid var(--yellow);
      box-shadow: 0 10px 40px rgba(255, 214, 10, 0.3);
    }
    .hero-bg {
      position: absolute;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background: var(--black);
      background-size: cover;
      background-position: center;
      filter: brightness(0.6) contrast(1.1);
      z-index: 0;
    }
    .hero-text {
      position: relative;
      z-index: 2;
      text-align: center;
      padding: 140px 5% 80px;
      font-size: 5.5rem;
      font-weight: 900;
      color: var(--yellow);
      text-shadow: 0 0 30px rgba(255, 214, 10, 0.8), 0 0 60px rgba(255, 214, 10, 0.5);
      letter-spacing: 5px;
      line-height: 1.1;
    }

    /* === SOCIAL BAR === */
    .contenedor-centrado {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 40px 0;
    }
    .social-bar {
      display: flex;
      justify-content: center;
      gap: 28px;
      margin: 20px 0;
    }
    .social-bar a {
      width: 64px; height: 64px;
      background: rgba(255, 214, 10, 0.15);
      border: 3px solid var(--yellow);
      border-radius: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: var(--transition);
      box-shadow: var(--glow);
    }
    .social-bar a:hover {
      background: var(--yellow);
      transform: translateY(-8px) rotate(5deg);
      box-shadow: 0 0 40px rgba(255, 214, 10, 0.7);
    }
    .social-bar svg {
      width: 32px; height: 32px;
      fill: var(--yellow);
      transition: var(--transition);
    }
    .social-bar a:hover svg { fill: var(--black); }

    /* === NEWS === */
    .news {
      background: var(--dark);
      max-width: 1300px;
      margin: 100px auto;
      padding: 80px 5%;
      border: 6px solid var(--yellow);
      border-radius: 20px;
      position: relative;
      box-shadow: 0 0 50px rgba(255, 214, 10, 0.3);
    }
    .news::before {
      content: 'LATEST';
      position: absolute;
      top: -20px; left: 50%;
      transform: translateX(-50%);
      background: var(--yellow);
      color: var(--black);
      padding: 8px 30px;
      font-family: 'Bangers', cursive;
      font-size: 18px;
      border-radius: 10px;
      box-shadow: var(--glow);
    }
    .schedule-grid {
      display: grid;
      grid-template-columns: 2.5fr 1.2fr 1.2fr;
      gap: 28px;
      margin-top: 20px;
    }
    .main-news, .news-card {
      position: relative;
      overflow: hidden;
      border-radius: 16px;
      transition: var(--transition);
      box-shadow: 0 8px 25px rgba(0,0,0,0.4);
      border: 4px solid var(--yellow);
      aspect-ratio: 1/1;
    }
    .main-news { grid-row: span 2; }
    .main-news img, .news-card img {
      width: 100%; height: 100%;
      object-fit: cover;
      transition: transform 0.6s ease;
    }
    .main-news:hover img, .news-card:hover img {
      transform: scale(1.1);
    }
    .news-card:hover { transform: translateY(-12px); }

    /* === BANNERS – ATREVIDOS, AMARILLO/NEGRO === */
    .section-banner {
      width: 75%;
      max-width: 1000px;
      height: 200px;
      margin: 100px auto;
      background: var(--black);
      border: 8px solid var(--yellow);
      border-radius: 24px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: var(--yellow);
      position: relative;
      overflow: hidden;
      box-shadow: 0 0 60px rgba(255, 214, 10, 0.5);
      transition: var(--transition);
    }
    .section-banner:hover {
      transform: scale(1.02);
      box-shadow: 0 0 80px rgba(255, 214, 10, 0.7);
    }
    .section-banner .banner-title {
      font-size: 4.8rem;
      font-weight: 900;
      text-shadow: var(--glow);
      margin-bottom: 8px;
    }
    .section-banner .banner-subtitle {
      font-size: 1.8rem;
      font-weight: 700;
      color: #ccc;
      letter-spacing: 3px;
    }
    .section-banner video {
      position: absolute;
      inset: 0;
      width: 100%; height: 100%;
      object-fit: cover;
      z-index: 0;
      filter: brightness(0.7) contrast(1.2);
    }

    /* === DISCOGRAFÍA 3D === */
    .discography {
      padding: 120px 0;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    .discography .holder {
      width: 700px; height: 240px;
      perspective: 1000px;
      position: relative;
    }
    .discography .spinner {
      transform-style: preserve-3d;
      transform: rotateY(calc(var(--ang) * 1deg));
      transition: transform 0.6s ease;
    }
    .discography .panel {
      position: absolute;
      width: 140px; height: 140px;
      background-size: cover;
      background-position: center;
      border-radius: 20px;
      box-shadow: 0 10px 35px rgba(0,0,0,0.5);
      transition: all 0.5s ease;
      border: 5px solid var(--yellow);
    }
    .discography .panel:hover {
      transform: scale(1.4) !important;
      border-color: var(--yellow-dark);
      box-shadow: 0 0 50px rgba(255, 214, 10, 0.8);
      z-index: 100;
    }
    .discography .pagination {
      margin-top: 40px;
      display: flex;
      gap: 30px;
    }
    .discography .pagination button {
      background: var(--yellow);
      color: var(--black);
      border: none;
      width: 56px; height: 56px;
      border-radius: 50%;
      font-size: 24px;
      cursor: pointer;
      box-shadow: var(--glow);
      transition: var(--transition);
      font-weight: 900;
    }
    .discography .pagination button:hover {
      background: var(--black);
      color: var(--yellow);
      transform: scale(1.15);
    }

    /* === VIDEOS 3D === */
    .videos { padding: 100px 0; }
    .videos-holder {
      width: 1000px; height: 360px;
      perspective: 1200px;
      position: relative;
    }
    .spinner-videos {
      transform-style: preserve-3d;
      transform: rotateY(calc(var(--angVid) * 1deg));
      transition: transform 0.7s ease;
    }
    .video-panel {
      position: absolute;
      width: 300px; height: 169px;
      background: #000;
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 12px 40px rgba(0,0,0,0.6);
      transition: all 0.6s ease;
      border: 5px solid var(--yellow);
    }
    .video-panel.center {
      width: 340px; height: 200px;
      z-index: 10;
      transform: scale(1.1);
      border-color: var(--yellow-dark);
      box-shadow: 0 0 60px rgba(255, 214, 10, 0.7);
    }
    .videos-pagination {
      position: absolute;
      bottom: -80px; left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 30px;
    }
    .videos-pagination button {
      background: var(--yellow);
      color: var(--black);
      border: none;
      width: 56px; height: 56px;
      border-radius: 50%;
      font-size: 24px;
      cursor: pointer;
      box-shadow: var(--glow);
      transition: var(--transition);
      font-weight: 900;
    }
    .videos-pagination button:hover {
      background: var(--black);
      color: var(--yellow);
      transform: scale(1.15);
    }

    /* === RESPONSIVE === */
    @media (max-width: 900px) {
      .hero-text { font-size: 3.5rem; padding: 100px 5% 60px; }
      .section-banner { width: 90%; height: 160px; }
      .section-banner .banner-title { font-size: 3rem; }
      .schedule-grid { grid-template-columns: 1fr; }
      .main-news { grid-row: auto; }
      nav ul { gap: 20px; }
      nav a { font-size: 14px; }
      .discography .holder { width: 90%; height: 200px; }
      .discography .panel { width: 100px; height: 100px; }
      .videos-holder { width: 90%; height: 300px; }
      .video-panel { width: 240px; height: 135px; }
      .video-panel.center { width: 280px; height: 160px; }
    }

    /* === FOOTER === */
    footer {
      text-align: center;
      padding: 100px 20px 60px;
      color: #888;
      font-size: 15px;
      letter-spacing: 1px;
    }
  </style>
</head>
<body>
  <header>
    <div class="logo">TENSHI</div>
    <nav>
      <ul>
        <li><a href="news.html">NEWS</a></li>
        <li><a href="Discography.html" id="link-discography">DISCOGRAPHY</a></li>
        <li><a href="movie.html">VIDEOS</a></li>
        <li><a href="wallpapers.html">GALLERY</a></li>
        <li><a href="My Studio.html">STUDIO</a></li>
      </ul>
    </nav>
    <button class="theme-toggle" onclick="toggleTheme()">MODO</button>
  </header>

  <div class="hero-wrapper">
    <div class="hero-bg"></div>
    <div class="hero-text">TENSHI<br><span style="font-size:0.6em;letter-spacing:8px;">幻想の響き</span></div>
  </div>

  <div class="contenedor-centrado">
    <div class="social-bar music-platforms">
      <a href="https://open.spotify.com" style="color:#1DB954"><i class="fab fa-spotify"></i></a>
      <a href="https://music.apple.com" style="color:#FA57C1"><i class="fab fa-apple"></i></a>
      <a href="https://www.youtube.com" style="color:#FF0000"><i class="fab fa-youtube"></i></a>
      <a href="https://www.deezer.com" style="color:#FF0000"><i class="fab fa-deezer"></i></a>
      <a href="https://music.amazon.com" style="color:#FF9900"><i class="fab fa-amazon"></i></a>
      <a href="https://tidal.com" style="color:#000"><i class="fab fa-tidal"></i></a>
    </div>
    <div class="social-bar social-networks">
      <a href="https://instagram.com" style="color:#E1306C"><i class="fab fa-instagram"></i></a>
      <a href="https://facebook.com" style="color:#1877F2"><i class="fab fa-facebook"></i></a>
      <a href="https://twitter.com" style="color:#1DA1F2"><i class="fab fa-twitter"></i></a>
      <a href="https://tiktok.com" style="color:#FE2C55"><i class="fab fa-tiktok"></i></a>
    </div>
  </div>

  <section class="news" id="news">
    <h2>NEWS</h2>
    <div class="schedule-grid" id="news-grid"></div>
  </section>

  <div class="section-banner" id="banner-discography">
    <video id="banner-discography-video" autoplay muted loop playsinline preload="metadata">
      <source id="banner-discography-src" src="" type="video/mp4">
    </video>
    <div class="banner-title">DISCOGRAPHY</div>
    <div class="banner-subtitle">ディスコグラフィー</div>
  </div>

  <section class="discography" id="discography">
    <div class="container">
      <div class="holder">
        <div class="spinner">
          <div class="panel a"></div><div class="panel b"></div><div class="panel c"></div><div class="panel d"></div><div class="panel e"></div>
          <div class="panel a"></div><div class="panel b"></div><div class="panel c"></div><div class="panel d"></div><div class="panel e"></div>
          <div class="panel a"></div><div class="panel b"></div><div class="panel c"></div><div class="panel d"></div><div class="panel e"></div>
        </div>
      </div>
      <div class="pagination">
        <button id="prev">←</button>
        <button id="next">→</button>
      </div>
    </div>
  </section>

  <div class="section-banner" id="banner-videos">
    <video id="banner-videos-video" autoplay muted loop playsinline preload="metadata">
      <source id="banner-videos-src" src="" type="video/mp4">
    </video>
    <div class="banner-title">VIDEOS</div>
    <div class="banner-subtitle">ビデオ</div>
  </div>

  <section class="videos" id="videos">
    <div class="container">
      <div class="videos-holder">
        <div class="spinner-videos" id="spinner-videos"></div>
        <div class="videos-pagination">
          <button id="prev-video">←</button>
          <button id="next-video">→</button>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <p>j-tenshiwebcomingsoon</p>
  </footer>

  <!-- jQuery -->
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

  <!-- TEMA -->
  <script>
    function toggleTheme() {
      document.body.classList.toggle('light-mode');
      localStorage.setItem('theme', document.body.classList.contains('light-mode') ? 'light' : 'dark');
    }
    if (localStorage.getItem('theme') === 'light') document.body.classList.add('light-mode');
  </script>

  <!-- CARRUSEL DISCOS -->
  <script>
    var ang = 0, panels = 15, ang_unit = 360 / panels;
    function updateSpinner() {
      $("*").css("--ang", ang);
      $(".panel").each(function(i) {
        let a = (i * ang_unit + ang) % 360;
        if (a > 180) a -= 360;
        if (a < -180) a += 360;
        $(this).css({
          transform: `rotateY(${i * ang_unit}deg) translateZ(450px)`,
          opacity: Math.abs(a) < 60 ? 1 : 0,
          "pointer-events": Math.abs(a) < 60 ? "auto" : "none"
        });
      });
    }
    $("#prev").click(() => { ang += ang_unit; updateSpinner(); });
    $("#next").click(() => { ang -= ang_unit; updateSpinner(); });
    $(document).ready(updateSpinner);
  </script>

  <!-- CARRUSEL VIDEOS -->
  <script>
    var angVid = 0, panelsVid = 9, angVid_unit = 360 / panelsVid;
    function updateSpinnerVideos() {
      $("*").css("--angVid", angVid);
      $(".video-panel").each(function(i) {
        let a = (i * angVid_unit + angVid) % 360;
        if (a > 180) a -= 360;
        if (a < -180) a += 360;
        $(this).toggleClass("center", Math.abs(a) < angVid_unit / 2);
      });
    }
    $("#prev-video").click(() => { angVid += angVid_unit; updateSpinnerVideos(); });
    $("#next-video").click(() => { angVid -= angVid_unit; updateSpinnerVideos(); });
  </script>

  <!-- CATÁLOGO -->
  <script>
    async function fetchWithTimeout(url, ms = 6000) {
      const ctl = new AbortController();
      const t = setTimeout(() => ctl.abort(), ms);
      try { return await fetch(url, { signal: ctl.signal, cache: 'no-store' }); }
      finally { clearTimeout(t); }
    }

    function driveDirectMp4(id) {
      return `https://drive.google.com/uc?export=download&id=${id}`;
    }

    function setBannerMedia(el, bg, vid) {
      if (bg) el.style.backgroundImage = `url('${bg}')`;
      const v = el.querySelector('video');
      const s = v?.querySelector('source');
      if (vid && s) {
        s.src = driveDirectMp4(vid);
        v.style.display = '';
        v.load(); v.play().catch(() => {});
      } else if (v) {
        v.pause(); v.style.display = 'none'; s.src = '';
      }
    }

    async function cargarCatalogoPrincipal() {
      try {
        const resp = await fetchWithTimeout('data/catalogo.json', 7000);
        const data = await resp.json();

        // Hero
        if (data.banner_principal) document.querySelector('.hero-bg').style.backgroundImage = `url('${data.banner_principal}')`;

        // Banners
        setBannerMedia(document.getElementById('banner-discography'), data.banner_discografia, data.banner_discografia_video);
        setBannerMedia(document.getElementById('banner-videos'), data.banner_videos, data.banner_videos_video);

        // News
        const grid = document.getElementById('news-grid');
        if (grid && data.news) {
          grid.innerHTML = '';
          ['n1','n2','n3','n4','n5'].forEach((k, i) => {
            const n = data.news[k];
            if (n?.imagen) {
              const a = document.createElement('a');
              a.href = n.link || '#';
              a.className = i === 0 ? 'main-news' : 'news-card';
              a.innerHTML = `<img src="${n.imagen}" alt="">`;
              grid.appendChild(a);
            }
          });
        }

        // Videos
        const spinner = document.getElementById('spinner-videos');
        if (spinner && data.videos?.length) {
          spinner.innerHTML = '';
          data.videos.slice(0, 9).forEach(v => {
            const url = v.url.replace('watch?v=', 'embed/').replace('youtu.be/', 'www.youtube.com/embed/');
            const p = document.createElement('div');
            p.className = 'video-panel';
            p.innerHTML = `<iframe src="${url}" allowfullscreen></iframe>`;
            spinner.appendChild(p);
          });
          updateSpinnerVideos();
        }

        // Discografía
        if (data.discografia) {
          let covers = [];
          if (data.discografia.tracks?.length) {
            const res = await Promise.all(data.discografia.tracks.slice(0,5).map(u => 
              fetch(`https://open.spotify.com/oembed?url=${encodeURIComponent(u)}&format=json`).then(r => r.ok ? r.json() : null).catch(() => null)
            ));
            covers = res.map(d => d?.thumbnail_url).filter(Boolean);
          }
          if (covers.length < 5 && data.discografia.portadas?.length) {
            covers.push(...data.discografia.portadas.slice(0, 5 - covers.length));
          }
          ['a','b','c','d','e'].forEach((cls, i) => {
            const url = covers[i];
            if (url) {
              document.querySelectorAll(`.panel.${cls}`).forEach(el => {
                el.style.backgroundImage = `url('${url}')`;
                el.onclick = () => location.href = `Discography.html#t${i+1}`;
              });
            }
          });
        }
      } catch (e) { console.error(e); }
    }

    document.addEventListener('DOMContentLoaded', () => {
      cargarCatalogoPrincipal();
      updateSpinnerVideos();
    });
  </script>

  <!-- AUTOPLAY -->
  <script>
    let autoDisc = setInterval(() => { ang -= ang_unit; updateSpinner(); }, 5000);
    let autoVid = setInterval(() => { angVid -= angVid_unit; updateSpinnerVideos(); }, 5000);

    $('.discography .container').on('mouseenter', () => clearInterval(autoDisc)).on('mouseleave', () => autoDisc = setInterval(() => { ang -= ang_unit; updateSpinner(); }, 5000));
    $('.videos-holder').on('mouseenter', () => clearInterval(autoVid)).on('mouseleave', () => autoVid = setInterval(() => { angVid -= angVid_unit; updateSpinnerVideos(); }, 5000));
  </script>
</body>
</html>
